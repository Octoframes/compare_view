var compare_view;(()=>{"use strict";var e,t,o={d:(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};function c(e,o,n){o.onchange=()=>{o.checked?(e.next_mode=n,f(e,t.change_mode)):r(e)}}function r(t){var o;if(null!=t.ctrl_data)switch((o=t.ctrl_data).circle_button.checked=!1,o.horizontal_button.checked=!1,o.vertical_button.checked=!1,t.current_mode){case e.circle:t.ctrl_data.circle_button.checked=!0;break;case e.horizontal:t.ctrl_data.horizontal_button.checked=!0;break;case e.vertical:t.ctrl_data.vertical_button.checked=!0;break;default:throw`unsupported mode: ${t.current_mode}`}}function i(e,t){let o=e.canvas.getBoundingClientRect(),n=e.width/o.width,c=e.height/o.height;e.mouse_pos=[(t.clientX-o.left)*n,(t.clientY-o.top)*c]}function a(e){return e.render_circle=!0,document.documentElement.style.cursor="none",!1}function l(e){return v(e,t.update_circle),document.documentElement.style.cursor="default",!0}function s(e,t,o){e.ctx.beginPath(),e.ctx.arc(e.mouse_pos[0],e.mouse_pos[1],e.circle_size,t,o),e.ctx.lineTo(e.mouse_pos[0],e.mouse_pos[1]),e.ctx.closePath()}function d(e,t,o,n){var c;s(e,o,n),e.ctx.save(),e.ctx.clip(),e.ctx.drawImage(null===(c=e.images[t])||void 0===c?void 0:c.element,0,0,e.width,e.height),e.ctx.restore(),e.show_circle&&(s(e,o,n),e.ctx.strokeStyle="black",e.ctx.lineWidth=3,e.ctx.stroke())}function u(o,n){return f(o,t.update_slider),o.start_timestamp=n,o.start_pos=o.slider_pos,o.current_mode==e.horizontal?o.target_pos=o.mouse_pos[0]/o.width:o.target_pos=o.mouse_pos[1]/o.height,!0}function _(t,o){return t.held_down&&(t.current_mode==e.horizontal?t.target_pos=t.mouse_pos[0]/t.width:t.target_pos=t.mouse_pos[1]/t.height,t.start_pos=t.target_pos,t.slider_pos=t.target_pos),!0}function h(e,t){let o=(t-e.start_timestamp)/e.slider_time;return o=Math.min(Math.max(o,0),1),o=e.rate_function(o),e.slider_pos=(1-o)*e.start_pos+o*e.target_pos,e.slider_pos==e.target_pos}function m(e){return e.images.unshift(e.images.pop()),!0}function p(o){switch(o.current_mode){case e.undefined:break;case e.circle:!function(e){e.canvas.onmouseenter=null,e.canvas.onmousemove=null,e.canvas.onmouseleave=null,e.canvas.onmousedown=null,document.documentElement.style.cursor="default",f(e,t.remove_circle)}(o);break;case e.horizontal:case e.vertical:!function(e){e.canvas.onmousedown=null,e.canvas.onmouseup=null,e.canvas.onmousemove=null,document.onmouseup=null}(o);break;default:throw`unsupported mode: ${o.current_mode}`}switch(o.next_mode){case e.circle:!function(e){e.canvas.onmousemove=o=>{i(e,o),f(e,t.update_circle)},e.canvas.onmouseleave=()=>{f(e,t.remove_circle)},e.rotate_imgs_on_click&&(e.canvas.onmousedown=()=>{f(e,t.rotate_imgs)}),e.canvas.matches(":hover")&&f(e,t.update_circle)}(o);break;case e.horizontal:case e.vertical:!function(e){e.canvas.onmousedown=()=>{e.held_down=!0,f(e,t.start_slider_move)},e.canvas.onmousemove=o=>{i(e,o),f(e,t.possible_instant_slide)},document.onmouseup=()=>{e.held_down=!1}}(o);break;default:throw`unsupported mode: ${o.current_mode}`}return o.current_mode=o.next_mode,r(o),!0}function g(o,n){let c=[];for(;o.task_stack.length;){let e,r=o.task_stack.pop();switch(r){case t.none:e=!0;break;case t.change_mode:e=p(o);break;case t.rotate_imgs:e=m(o);break;case t.update_circle:e=a(o);break;case t.remove_circle:e=l(o);break;case t.start_slider_move:e=u(o,n);break;case t.possible_instant_slide:e=_(o);break;case t.update_slider:e=h(o,n);break;default:throw`unknown task: ${r}`}e||c.push(r)}o.task_stack=c,function(t,o){switch(t.current_mode){case e.undefined:break;case e.circle:!function(e){var t;if(e.render_circle){e.ctx.clearRect(0,0,e.width,e.height),function(e){var t;e.ctx.beginPath(),e.ctx.arc(e.mouse_pos[0],e.mouse_pos[1],e.circle_size-1,0,2*Math.PI),e.ctx.lineTo(e.width,0),e.ctx.lineTo(0,0),e.ctx.lineTo(0,e.height),e.ctx.lineTo(e.width,e.height),e.ctx.lineTo(e.width,0),e.ctx.closePath(),e.ctx.save(),e.ctx.clip(),e.ctx.drawImage(null===(t=e.images[0])||void 0===t?void 0:t.element,0,0,e.width,e.height),e.ctx.restore()}(e);for(let t=1;t<e.images_len;++t)d(e,t,(t-1)*Math.PI*2/(e.images_len-1),t*Math.PI*2/(e.images_len-1))}else e.ctx.clearRect(0,0,e.width,e.height),e.ctx.drawImage(null===(t=e.images[0])||void 0===t?void 0:t.element,0,0,e.width,e.height);e.render_circle=!1}(t);break;case e.horizontal:case e.vertical:!function(t){var o;t.ctx.clearRect(0,0,t.width,t.height),t.ctx.drawImage(null===(o=t.images[0])||void 0===o?void 0:o.element,0,0,t.width,t.height),t.show_slider&&function(t){t.ctx.beginPath(),t.current_mode==e.horizontal?(t.ctx.moveTo(t.slider_pos*t.width,0),t.ctx.lineTo(t.slider_pos*t.width,t.height)):(t.ctx.moveTo(0,t.slider_pos*t.height),t.ctx.lineTo(t.width,t.slider_pos*t.height)),t.ctx.closePath(),t.ctx.strokeStyle="black",t.ctx.lineWidth=5,t.ctx.stroke()}(t),function(t){var o;t.ctx.beginPath(),t.current_mode==e.horizontal?t.ctx.rect(t.slider_pos*t.width,0,t.width,t.height):t.ctx.rect(0,t.slider_pos*t.height,t.width,t.height),t.ctx.closePath(),t.ctx.save(),t.ctx.clip(),t.ctx.clearRect(0,0,t.width,t.height),t.ctx.drawImage(null===(o=t.images[1])||void 0===o?void 0:o.element,0,0,t.width,t.height),t.ctx.restore()}(t)}(t);break;default:throw`unsupported mode: ${t.current_mode}`}}(o),o.task_stack.length?(window.requestAnimationFrame((e=>{g(o,e)})),o.next_update_queued=!0):o.next_update_queued=!1}function v(e,t){let o=e.task_stack.indexOf(t);-1!=o&&e.task_stack.splice(o,1)}function f(e,t){v(e,t),e.task_stack.push(t),function(e){e.next_update_queued||(e.next_update_queued=!0,window.requestAnimationFrame((t=>{g(e,t)})))}(e)}function w(e,t,o){let n=document.createElement("input");n.type="checkbox",n.id=e;let c=document.createElement("label");c.innerHTML=t,c.htmlFor=n.id;let r=document.createElement("br");return o.appendChild(n),o.appendChild(c),o.appendChild(r),n}function x(e,t){let o=document.createElement("button");o.innerHTML=e;let n=document.createElement("br");return t.appendChild(o),t.appendChild(n),o}function b(o,n,r){!function(o,n,r,i){if(o.length<2)throw`image_urls must contain at least two images, not ${o.length}`;function a(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}!function(e,t){let o=[],n=0,c=e.length;for(let r=0;r<c;++r){let i={url:e[r],element:document.createElement("img"),label:`${r}`};o.push(i),i.element.onload=()=>{++n,n==c&&t(o)},i.element.src=i.url}}(o,(o=>{let l={images:o,images_len:o.length,canvas:n.canvas,ctx:n,width:n.canvas.width,height:n.canvas.height,ctrl_data:i,next_mode:null!=r.start_mode?r.start_mode:e.circle,current_mode:e.undefined,task_stack:[],next_update_queued:!1,mouse_pos:[0,0],held_down:!1,render_circle:!1,circle_size:null!=r.circle_size?r.circle_size:100,show_circle:null==r.show_circle||r.show_circle,rotate_imgs_on_click:null==r.rotate_imgs_on_click||r.rotate_imgs_on_click,slider_pos:null!=r.start_slider_pos?r.start_slider_pos:.5,slider_time:null!=r.slider_time?r.slider_time:400,rate_function:null!=r.rate_function?r.rate_function:a,show_slider:null==r.show_slider||r.show_slider,start_timestamp:0,start_pos:0,target_pos:0};!function(o){null!=o.ctrl_data&&(c(o,o.ctrl_data.circle_button,e.circle),c(o,o.ctrl_data.horizontal_button,e.horizontal),c(o,o.ctrl_data.vertical_button,e.vertical),o.ctrl_data.rotate_imgs_button.onclick=()=>{f(o,t.rotate_imgs)})}(l),f(l,t.change_mode)}))}(o,function(e){let t=document.getElementById(e),o=t.getContext("2d");return t.width=t.scrollWidth,t.height=t.scrollHeight,o}(n),null!=r?r:{},null!=r&&null!=r.controls_id?function(e,t){t=t||function(){let e="";for(let t=0;t<12;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(36*Math.random()));return e}();let o=document.getElementById(e);return{controls_parent:o,circle_button:w(`${t}circle_button`,"Circle",o),horizontal_button:w(`${t}horizontal_button`,"Horizontal",o),vertical_button:w(`${t}vertical_button`,"Vertical",o),rotate_imgs_button:x("Rotate Images",o)}}(r.controls_id,r.key):void 0)}o.r(n),o.d(n,{load:()=>b}),function(e){e[void 0]="undefined",e.horizontal="horizontal",e.vertical="vertical",e.circle="circle"}(e||(e={})),function(e){e.none="none",e.rotate_imgs="rotate_imgs",e.change_mode="change_mode",e.update_circle="update_circle",e.remove_circle="stop_update_circle",e.start_slider_move="start_slider_move",e.possible_instant_slide="instant_slide",e.update_slider="update_slider"}(t||(t={})),compare_view=n})();