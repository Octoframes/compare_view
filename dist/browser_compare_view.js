var compare_view;(()=>{"use strict";var e={156:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.load_ctx=void 0,t.load_ctx=function(e){let t=document.getElementById(e),o=t.getContext("2d");return t.tabIndex=1,o}},138:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.create_controls=void 0;const c=o(949);function n(e,t,o){let c=document.createElement("input");c.type="checkbox",c.id=e;let n=document.createElement("label");n.innerHTML=t,n.htmlFor=c.id;let a=document.createElement("br");return o.appendChild(c),o.appendChild(n),o.appendChild(a),c}function a(e,t){let o=document.createElement("button");o.innerHTML=e;let c=document.createElement("br");return t.appendChild(o),t.appendChild(c),o}t.create_controls=function(e,t=(0,c.create_key)()){let o=document.getElementById(e);if(null==o)throw`controls_id '${e}' isn't valid`;return{circle_check:n(`${t}_circle_button`,"Circle",o),horizontal_check:n(`${t}_horizontal_button`,"Horizontal",o),vertical_check:n(`${t}_vertical_button`,"Vertical",o),revolve_imgs_button:a("Revolve Images",o)}}},271:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.choose_cfg=void 0;const c={start_mode:o(419).Mode.circle,circumference_fraction:.005,circle_size:void 0,circle_fraction:.2,show_circle:!0,revolve_imgs_on_click:!0,slider_fraction:.01,slider_time:400,rate_function:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},start_slider_pos:.5,show_slider:!0};t.choose_cfg=function(e,t){return null!=e[t]?e[t]:c[t]}},419:(e,t)=>{var o,c;Object.defineProperty(t,"__esModule",{value:!0}),t.Task=t.Mode=void 0,(c=t.Mode||(t.Mode={}))[void 0]="undefined",c.horizontal="horizontal",c.vertical="vertical",c.circle="circle",(o=t.Task||(t.Task={}))[o.none=0]="none",o[o.revolve_imgs=1]="revolve_imgs",o[o.change_mode=2]="change_mode",o[o.update_circle=3]="update_circle",o[o.remove_circle=4]="remove_circle",o[o.start_slider_move=5]="start_slider_move",o[o.possible_instant_slide=6]="possible_instant_slide",o[o.update_slider=7]="update_slider"},33:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.attach_control_data=t.get_mode_change_callback=t.reload_checkboxes=void 0;const c=o(419),n=o(308);function a(e){var t;if(null!=e.ctrl_data)switch((t=e.ctrl_data).circle_check.checked=!1,t.horizontal_check.checked=!1,t.vertical_check.checked=!1,e.current_mode){case c.Mode.circle:e.ctrl_data.circle_check.checked=!0;break;case c.Mode.horizontal:e.ctrl_data.horizontal_check.checked=!0;break;case c.Mode.vertical:e.ctrl_data.vertical_check.checked=!0;break;default:throw`unsupported mode: ${e.current_mode}`}}function s(e,t){return o=>{o.target.checked?(e.next_mode=t,(0,n.push_task)(e,c.Task.change_mode)):a(e)}}t.reload_checkboxes=a,t.get_mode_change_callback=s,t.attach_control_data=function(e,t){e.ctrl_data=t,t.circle_check.onclick=s(e,c.Mode.circle),t.horizontal_check.onclick=s(e,c.Mode.horizontal),t.vertical_check.onclick=s(e,c.Mode.vertical),t.revolve_imgs_button.onclick=()=>{(0,n.push_task)(e,c.Task.revolve_imgs)}}},949:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.create_key=t.set_mouse_pos=void 0,t.set_mouse_pos=function(e,t){let o=e.canvas.getBoundingClientRect(),c=e.width/o.width,n=e.height/o.height;e.mouse_pos=[(t.clientX-o.left)*c,(t.clientY-o.top)*n]},t.create_key=function(){let e="";for(let t=0;t<12;t++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(36*Math.random()));return e}},850:(e,t)=>{function o(e){var t,o;let c=null===(t=e[0])||void 0===t?void 0:t.element.width,n=null===(o=e[0])||void 0===o?void 0:o.element.height;for(let t of e)t.element.width==c&&t.element.height==n||console.log("Warning: images don't have the same resolution"),c=Math.max(c,t.element.width),n=Math.max(n,t.element.height);return[c,n]}Object.defineProperty(t,"__esModule",{value:!0}),t.revolve_imgs=t.load_images=void 0,t.load_images=function(e,t){if(e.length<2)throw`image_urls must contain at least two images, not ${e.length}`;let c=[],n=0,a=e.length;for(let s=0;s<a;++s){let i={url:e[s],element:document.createElement("img"),label:`${s}`};c.push(i),i.element.onload=()=>{++n,n==a&&t(c,o(c))},i.element.src=i.url}},t.revolve_imgs=function(e){return e.images.unshift(e.images.pop()),!0}},787:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.load_cvd=void 0;const c=o(419),n=o(308),a=o(850),s=o(917),i=o(271);t.load_cvd=function(e,t,o={},r){!function(e){if("y"===e.dataset.in_use)throw`the canvas with the id '${e.id}' is already in use`;e.dataset.in_use="y"}(t.canvas),(0,a.load_images)(e,((e,a)=>{let l={images:e,images_len:e.length,canvas:t.canvas,ctx:t,width:0,height:0,ctrl_data:void 0,mouse_pos:[0,0],held_down:!1,next_mode:(0,i.choose_cfg)(o,"start_mode"),current_mode:c.Mode.undefined,task_stack:[],next_update_queued:!1,circumference_thickness:0,render_circle:!1,circle_size:0,show_circle:(0,i.choose_cfg)(o,"show_circle"),revolve_imgs_on_click:(0,i.choose_cfg)(o,"revolve_imgs_on_click"),touching:!1,slider_thickness:0,slider_pos:(0,i.choose_cfg)(o,"start_slider_pos"),slider_time:(0,i.choose_cfg)(o,"slider_time"),rate_function:(0,i.choose_cfg)(o,"rate_function"),show_slider:(0,i.choose_cfg)(o,"show_slider"),start_timestamp:0,start_pos:0,target_pos:0};(0,s.load_canvas_scaling)(l,a,o),null!=r&&r(l),(0,n.push_task)(l,c.Task.change_mode)}))}},736:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.change_mode=void 0;const c=o(419),n=o(33),a=o(571),s=o(199);t.change_mode=function(e){return function(e){switch(e.current_mode){case c.Mode.undefined:break;case c.Mode.circle:(0,a.terminate_circle_mode)(e);break;case c.Mode.horizontal:case c.Mode.vertical:(0,s.terminate_slider_mode)(e);break;default:throw`unsupported mode: ${e.current_mode}`}}(e),function(e){switch(e.current_mode=e.next_mode,e.next_mode){case c.Mode.circle:(0,a.init_circle_mode)(e);break;case c.Mode.horizontal:case c.Mode.vertical:(0,s.init_slider_mode)(e);break;default:throw`unsupported mode: ${e.current_mode}`}(0,n.reload_checkboxes)(e)}(e),!0}},571:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.render_circle=t.remove_circle=t.update_circle=t.terminate_circle_mode=t.init_circle_mode=void 0;const c=o(419),n=o(308),a=o(949);function s(e,t,o){e.ctx.beginPath(),e.ctx.arc(e.mouse_pos[0],e.mouse_pos[1],e.circle_size,t,o),o-t!=2*Math.PI&&e.ctx.lineTo(e.mouse_pos[0],e.mouse_pos[1]),e.ctx.closePath()}function i(e,t,o,c){var n;s(e,o,c),e.ctx.save(),e.ctx.clip(),e.ctx.drawImage(null===(n=e.images[t])||void 0===n?void 0:n.element,0,0,e.width,e.height),e.ctx.restore(),e.show_circle&&(s(e,o,c),e.ctx.strokeStyle="black",e.ctx.lineWidth=e.circumference_thickness,e.ctx.stroke())}t.init_circle_mode=function(e){e.canvas.onmousemove=t=>{(0,a.set_mouse_pos)(e,t),(0,n.push_task)(e,c.Task.update_circle)},e.canvas.onmouseleave=()=>{(0,n.push_task)(e,c.Task.remove_circle)},e.revolve_imgs_on_click&&(e.canvas.ontouchstart=()=>{e.touching=!0},e.canvas.onmousedown=()=>{e.touching||(0,n.push_task)(e,c.Task.revolve_imgs)}),e.canvas.matches(":hover")&&(0,n.push_task)(e,c.Task.update_circle),e.canvas.onfocus=()=>{document.body.style.userSelect="none"},e.canvas.onblur=()=>{document.body.style.userSelect="text",e.touching=!1}},t.terminate_circle_mode=function(e){e.canvas.onmousemove=null,e.canvas.onmouseleave=null,e.canvas.ontouchstart=null,e.canvas.onmousedown=null,e.canvas.onfocus=null,e.canvas.onblur=null,e.canvas.style.cursor="default",document.body.style.userSelect="text",e.touching=!1,(0,n.push_task)(e,c.Task.remove_circle)},t.update_circle=function(e){return e.render_circle=!0,e.canvas.style.cursor="none",!1},t.remove_circle=function(e){return(0,n.delete_task)(e,c.Task.update_circle),e.canvas.style.cursor="default",!0},t.render_circle=function(e){var t;if(e.render_circle){e.ctx.clearRect(0,0,e.width,e.height),function(e){var t;e.ctx.beginPath(),e.ctx.arc(e.mouse_pos[0],e.mouse_pos[1],e.circle_size-1,0,2*Math.PI),e.ctx.lineTo(e.width,0),e.ctx.lineTo(0,0),e.ctx.lineTo(0,e.height),e.ctx.lineTo(e.width,e.height),e.ctx.lineTo(e.width,0),e.ctx.closePath(),e.ctx.save(),e.ctx.clip(),e.ctx.drawImage(null===(t=e.images[0])||void 0===t?void 0:t.element,0,0,e.width,e.height),e.ctx.restore()}(e);for(let t=1;t<e.images_len;++t)i(e,t,(t-1)*Math.PI*2/(e.images_len-1),t*Math.PI*2/(e.images_len-1))}else e.ctx.clearRect(0,0,e.width,e.height),e.ctx.drawImage(null===(t=e.images[0])||void 0===t?void 0:t.element,0,0,e.width,e.height);e.render_circle=!1}},199:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.render_slider=t.update_slider=t.instant_slide=t.start_slider_move=t.terminate_slider_mode=t.init_slider_mode=void 0;const c=o(419),n=o(308),a=o(949);t.init_slider_mode=function(e){e.canvas.onmousedown=()=>{e.held_down=!0,(0,n.push_task)(e,c.Task.start_slider_move)},e.canvas.onmouseup=()=>{e.held_down=!1},document.onmouseup=()=>{e.held_down=!1},e.canvas.onmousemove=t=>{(0,a.set_mouse_pos)(e,t),(0,n.push_task)(e,c.Task.possible_instant_slide)},e.current_mode==c.Mode.horizontal?e.canvas.onmouseenter=()=>{e.canvas.style.cursor="ew-resize"}:e.canvas.onmouseenter=()=>{e.canvas.style.cursor="ns-resize"},e.canvas.onmouseleave=()=>{e.canvas.style.cursor="default"},e.canvas.onfocus=()=>{document.body.style.userSelect="none"},e.canvas.onblur=()=>{document.body.style.userSelect="text"}},t.terminate_slider_mode=function(e){e.canvas.onmousedown=null,e.canvas.onmouseup=null,document.onmouseup=null,e.canvas.onmouseup=null,e.canvas.onmousemove=null,e.canvas.onmouseenter=null,e.canvas.onmouseleave=null,e.canvas.onfocus=null,e.canvas.onblur=null,e.held_down=!1,e.canvas.style.cursor="default",document.body.style.userSelect="text"},t.start_slider_move=function(e,t){return(0,n.push_task)(e,c.Task.update_slider),e.start_timestamp=t,e.start_pos=e.slider_pos,e.current_mode==c.Mode.horizontal?e.target_pos=e.mouse_pos[0]/e.width:e.target_pos=e.mouse_pos[1]/e.height,!0},t.instant_slide=function(e,t){return e.held_down&&(e.current_mode==c.Mode.horizontal?e.target_pos=e.mouse_pos[0]/e.width:e.target_pos=e.mouse_pos[1]/e.height,e.start_pos=e.target_pos,e.slider_pos=e.target_pos),!0},t.update_slider=function(e,t){let o=(t-e.start_timestamp)/e.slider_time;return o=Math.min(Math.max(o,0),1),o=e.rate_function(o),e.slider_pos=(1-o)*e.start_pos+o*e.target_pos,e.slider_pos==e.target_pos},t.render_slider=function(e){var t;e.ctx.clearRect(0,0,e.width,e.height),e.ctx.drawImage(null===(t=e.images[0])||void 0===t?void 0:t.element,0,0,e.width,e.height),e.show_slider&&function(e){e.ctx.beginPath(),e.current_mode==c.Mode.horizontal?(e.ctx.moveTo(e.slider_pos*e.width,0),e.ctx.lineTo(e.slider_pos*e.width,e.height)):(e.ctx.moveTo(0,e.slider_pos*e.height),e.ctx.lineTo(e.width,e.slider_pos*e.height)),e.ctx.closePath(),e.ctx.strokeStyle="black",e.ctx.lineWidth=e.slider_thickness,e.ctx.stroke()}(e),function(e){var t;e.ctx.beginPath(),e.current_mode==c.Mode.horizontal?e.ctx.rect(e.slider_pos*e.width,0,e.width,e.height):e.ctx.rect(0,e.slider_pos*e.height,e.width,e.height),e.ctx.closePath(),e.ctx.save(),e.ctx.clip(),e.ctx.clearRect(0,0,e.width,e.height),e.ctx.drawImage(null===(t=e.images[1])||void 0===t?void 0:t.element,0,0,e.width,e.height),e.ctx.restore()}(e)}},917:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.load_canvas_scaling=void 0;const c=o(271);t.load_canvas_scaling=function(e,t,o){e.canvas.width=t[0],e.canvas.height=t[1],e.width=e.canvas.width,e.height=e.canvas.height,function(e,t){let o=Math.max(e.canvas.width,e.canvas.height);e.circumference_thickness=o*(0,c.choose_cfg)(t,"circumference_fraction"),e.circle_size=null!=t.circle_size?t.circle_size:o*(0,c.choose_cfg)(t,"circle_fraction"),e.slider_thickness=o*(0,c.choose_cfg)(t,"slider_fraction")}(e,o)}},308:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contains_task=t.push_task=t.delete_task=void 0;const c=o(419),n=o(850),a=o(736),s=o(571),i=o(199);function r(e){e.next_update_queued=!0,window.requestAnimationFrame((t=>{!function(e,t){!function(e,t){let o=[];for(;e.task_stack.length;){let r,l=e.task_stack.pop();switch(l){case c.Task.none:r=!0;break;case c.Task.change_mode:r=(0,a.change_mode)(e);break;case c.Task.revolve_imgs:r=(0,n.revolve_imgs)(e);break;case c.Task.update_circle:r=(0,s.update_circle)(e);break;case c.Task.remove_circle:r=(0,s.remove_circle)(e);break;case c.Task.start_slider_move:r=(0,i.start_slider_move)(e,t);break;case c.Task.possible_instant_slide:r=(0,i.instant_slide)(e,t);break;case c.Task.update_slider:r=(0,i.update_slider)(e,t);break;default:throw`unknown task: ${l}`}r||o.push(l)}e.task_stack=o}(e,t),function(e){switch(e.current_mode){case c.Mode.circle:(0,s.render_circle)(e);break;case c.Mode.horizontal:case c.Mode.vertical:(0,i.render_slider)(e);break;default:throw`unsupported mode: ${e.current_mode}`}}(e),e.task_stack.length?r(e):e.next_update_queued=!1}(e,t)}))}function l(e,t){let o=e.task_stack.indexOf(t);-1!=o&&e.task_stack.splice(o,1)}t.delete_task=l,t.push_task=function(e,t){l(e,t),e.task_stack.push(t),function(e){e.next_update_queued||r(e)}(e)},t.contains_task=function(e,t){return-1!=e.task_stack.indexOf(t)}}},t={};function o(c){var n=t[c];if(void 0!==n)return n.exports;var a=t[c]={exports:{}};return e[c](a,a.exports,o),a.exports}var c={};(()=>{var e=c;Object.defineProperty(e,"__esModule",{value:!0}),e.load=void 0;const t=o(787),n=o(33),a=o(156),s=o(138);e.load=function(e,o,c={}){let i=null!=c.controls_id?(0,s.create_controls)(c.controls_id,c.key):void 0;(0,t.load_cvd)(e,(0,a.load_ctx)(o),c,(e=>{null!=i&&(0,n.attach_control_data)(e,i)}))}})(),compare_view=c})();